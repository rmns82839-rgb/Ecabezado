<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Laboratorio Matem√°tico Pro - IDaMAr</title>
    <link rel="icon" href="favicon.ico">
    <link rel="stylesheet" href="math.css">
    
    <script>
        window.MathJax = {
            tex: { 
                inlineMath: [['$', '$']], 
                displayMath: [['$$', '$$']],
                processEscapes: true
            },
            options: {
                enableMenu: false 
            },
            svg: { fontCache: 'global' }
        };
    </script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&family=Open+Sans:wght@400;600;700&display=swap" rel="stylesheet">
</head>
<body>

    <div class="page-container math-mode">
        <header class="document-header">
            <div class="header-content">
                <img src="logo.jpg" alt="Logo IDaMAr" class="app-logo">
                <div class="title-container">
                    <h1 class="math-title">EDITOR MATEM√ÅTICO PRO</h1>
                    <p class="subtitle">Iv√°n David Montes Arrieta ‚Ä¢ Constructor de Matrices nxn</p>
                </div>
            </div>
        </header>

        <main class="main-content">
            <section class="matrix-builder-section card" aria-labelledby="matrix-title">
                <div class="matrix-builder">
                    <div class="builder-group">
                        <label for="matrix-rows">Filas:</label>
                        <select id="matrix-rows" class="modern-select">
                            <option value="1">1</option><option value="2">2</option><option value="3" selected>3</option>
                            <option value="4">4</option><option value="5">5</option>
                        </select>
                    </div>
                    <div class="builder-group">
                        <label for="matrix-cols">Columnas:</label>
                        <select id="matrix-cols" class="modern-select">
                            <option value="1">1</option><option value="2">2</option><option value="3" selected>3</option>
                            <option value="4">4</option><option value="5">5</option>
                        </select>
                    </div>
                    <button type="button" onclick="insertDynamicMatrix()" class="modern-btn insert-matrix-btn" title="Insertar matriz personalizada">‚ûï Insertar Matriz</button>
                </div>
            </section>

            <section class="tools-section card">
                <div class="math-keyboard">
                    <button type="button" onclick="insertMath('\\frac{?}{?}')" class="symbol-btn">‚ûó Fracci√≥n</button>
                    <button type="button" onclick="insertMath('\\sqrt{?}')" class="symbol-btn">‚àö Ra√≠z</button>
                    <button type="button" onclick="insertMath('\\int_{?}^{?}')" class="symbol-btn">‚à´ Integral</button>
                    <button type="button" onclick="insertMath('?^{?}')" class="symbol-btn">x¬≤ Potencia</button>
                    <button type="button" onclick="insertMath('\\pi')" class="symbol-btn">œÄ</button>
                    <button type="button" onclick="insertMath('\\alpha')" class="symbol-btn">Œ±</button>

                    <div class="quick-formulas builder-group">
                        <label for="quick-formula-select" style="color: #ef6c00; font-weight: bold;">F√≥rmulas R√°pidas:</label>
                        <select id="quick-formula-select" onchange="insertSelectedFormula()" class="modern-select highlight-select">
                            <option value="" disabled selected>Elige una operaci√≥n...</option>
                            <optgroup label="Aritm√©tica de Fracciones">
                                <option value="\frac{?}{?} + \frac{?}{?} = \frac{? \cdot ? + ? \cdot ?}{? \cdot ?}">Suma de Fracciones</option>
                                <option value="\frac{?}{?} - \frac{?}{?} = \frac{? \cdot ? - ? \cdot ?}{? \cdot ?}">Resta de Fracciones</option>
                                <option value="\frac{?}{?} \cdot \frac{?}{?} = \frac{? \cdot ?}{? \cdot ?}">Multiplicaci√≥n de Fracciones</option>
                                <option value="\frac{\frac{?}{?}}{\frac{?}{?}} = \frac{? \cdot ?}{? \cdot ?}">Divisi√≥n Compleja (Oreja)</option>
                            </optgroup>
                            <optgroup label="Matrices y Determinantes">
                                <option value="\begin{pmatrix} + & - & + \\ - & + & - \\ + & - & + \end{pmatrix}">Matriz de Signos 3x3</option>
                                <option value="\begin{pmatrix} ? & ? & ? & ? \\ ? & ? & ? & ? \\ ? & ? & ? & ? \\ ? & ? & ? & ? \end{pmatrix}">Matriz 4x4 Vac√≠a</option>
                                <option value="\frac{\begin{vmatrix} ? & ? \\ ? & ? \end{vmatrix}}{?}">Regla de Cramer</option>
                            </optgroup>
                            <optgroup label="C√°lculo / Otros">
                                <option value="\int_{?}^{?} ? \,dx">Integral Definida</option>
                                <option value="\lim_{x \to \infty} ?">L√≠mite al Infinito</option>
                            </optgroup>
                        </select>
                    </div>              
                </div>
            </section>

            <section class="editor-section">
                <div class="drawing-toolbar">
                    <button type="button" onclick="setTool('pen')" class="tool-btn" title="L√°piz">‚úèÔ∏è</button>
                    <button type="button" onclick="setTool('highlighter')" class="tool-btn" title="Resaltador">üñçÔ∏è</button>
                    <button type="button" onclick="setTool('line')" class="tool-btn" title="L√≠nea">üìè</button>
                    <button type="button" onclick="setTool('arrow')" class="tool-btn" title="Flecha">‚ÜóÔ∏è</button>
                    <input type="color" id="colorPicker" value="#673ab7" title="Color de dibujo">
                    <button type="button" onclick="setTool(null)" class="tool-btn" title="Cursor normal">üñêÔ∏è</button>
                    <button type="button" onclick="clearCanvas()" class="tool-btn clear-draw" title="Borrar Dibujo">üóëÔ∏è</button>
                </div>

                <div class="split-editor">
                    <div class="editor-side card">
                        <div class="side-label">C√ìDIGO (Rellena los ?)</div>
                        <div id="math-input" contenteditable="true" aria-label="Editor de c√≥digo matem√°tico" placeholder="Escribe aqu√≠..."></div>
                    </div>

                    <div class="preview-side card">
                        <div class="side-label">VISTA PREVIA (Hoja Milimetrada)</div>
                        <div class="preview-container">
                            <canvas id="drawing-canvas"></canvas>
                            <div id="math-preview" class="grid-paper"></div>
                        </div>
                    </div>
                </div>
            </section>

            <footer class="button-toolbar">
                <button type="button" id="undo-btn" class="modern-btn edit-btn">‚Ü©Ô∏è Deshacer</button>
                <button type="button" id="redo-btn" class="modern-btn edit-btn">‚Ü™Ô∏è Rehacer</button>
                <button type="button" id="export-img-btn" class="modern-btn save-btn">üñºÔ∏è Guardar Imagen</button>
                <button type="button" id="clear-btn" class="modern-btn clear-btn">üóëÔ∏è Limpiar Todo</button>
                <button type="button" id="print-math-btn" class="modern-btn print-btn">üñ®Ô∏è PDF</button>
                <button type="button" class="modern-btn back-btn" onclick="window.location.href='index.html'">üè† Volver</button>
            </footer>
        </main>

        <footer class="document-footer">
            <p class="signature">¬© By IDaMAr - Iv√°n David Montes Arrieta</p>
        </footer>
    </div>

    <script src="math.js"></script>
</body>
</html>
